# 开机启动

#linux #linux/stepup

> 作者：这个懒虫不太懒
> 链接：`https://www.jianshu.com/p/7fbafa98caf4`
> 来源：简书
> 著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。

```shell
 systemctl list-unit-files
```

我们开起来 sshd 服务，显示出来 service 的位置，我们模仿这个做一个开机启动出来。
还记得很早的 linux 中有一个 rc.local 么？有什么需要开机启动的脚本直接丢进去就行了。
升级到了systemd 之后，这个玩意就消失了，我们尝试恢复他。
先建立一个 rc-local.service，

```shell
sudo vim /usr/lib/systemd/system/rc-local.service
```

然后，我们模仿其他的 service ，来写一下：

```rc-local.service
[Unit]
Description="/etc/rc.local Compatibility" 
#Wants=sshdgenkeys.service
#After=sshdgenkeys.service
#After=network.target

[Service]
Type=forking
ExecStart=/etc/rc.local start
TimeoutSec=0
StandardInput=tty
RemainAfterExit=yes
SysVStartPriority=99

[Install]
WantedBy=multi-user.target
```

然后，我们创建 /etc/rc.local 文件：
添加一些我们希望的开机运行脚本

```shell
sudo touch /etc/rc.local
sudo chmod +x /etc/rc.local
sudo vim /etc/rc.local 

# 允许虚拟机与宿主机之间的复制粘贴
VBoxClient-all & 

```

最后：

```shell
sudo systemctl enable rc-local.service
```
