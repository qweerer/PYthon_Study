## 配置PHP

```shell
# 常看扩展地址
php -i | grep extension_dir
ln -s /usr/lib/php/20180731 /0app/php_extension

vim /0app/php_extension.ini
ln -s /0app/php_extension.ini /etc/php/7.3/fpm/conf.d/40-new-add.ini
```

### 解压并编译插件

- 编译环境

```shell
apt-get install php7.3-dev gcc make
find / -name phpize
```

- 编译

```shell
wget https://www.php.net/distributions/php-7.3.27.tar.gz
mkdir ~/php
tar -zxvf php-7.3.27.tar.gz -C ~/php

cd /root/php/php-7.3.27/ext/mysqli/
phpize
./configure -prefix=/0app/php_exten/mysqli --with-php-config=/usr/bin/php-config
make && make install
cp ./modules/mysqli.so /0app/php_exten

cd ../mysqlnd/
phpize
vi configure
# 加入
export PHP_OPENSSL_DIR=yes
#
./configure -prefix=/0app/php_exten/mysqlnd --with-php-config=/usr/bin/php-config --enable-mysqlnd
make
cp ./modules/mysqlnd.so /0app/php_exten

cd ../pdo_mysql/
phpize
./configure -prefix=/0app/php_exten/pdo_mysql --with-php-config=/usr/bin/php-config
make
cp ./modules/pdo_mysql.so /0app/php_exten

cd ../sqlite3/
phpize
./configure -prefix=/0app/php_exten/sqlite3
make
cp ./modules/sqlite3.so /0app/php_exten

cd ../pdo_sqlite/
phpize
./configure -prefix=/0app/php_exten/pdo_sqlite
make
cp ./modules/pdo_sqlite.so /0app/php_exten

```

- 配置插件

```shell
vim /0app/php_extension.ini
ln -s /0app/php_extension.ini /etc/php/7.3/fpm/conf.d/40-new-add.ini
ln -s /0app/php_extension.ini /etc/php/7.3/cli/conf.d/40-new-add.ini
ln -s /0app/php_extension.ini /etc/php/7.3/cgi/conf.d/40-new-add.ini
```

```ini
; configuration for php common module
; priority=40
extension=/0app/php_exten/mysqli.so
extension=/0app/php_exten/mysqlnd.so
extension=/0app/php_exten/pdo_mysql.so
extension=/0app/php_exten/sqlite3.so
extension=/0app/php_exten/pdo_sqlite.so

```

